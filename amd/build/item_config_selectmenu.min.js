define("mod_trainingevaluation/item_config_selectmenu",["exports","core/str"],(function(_exports,_str){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{const initWhenReady=()=>{const container=document.getElementById("selectmenu-options-container"),addButton=document.getElementById("selectmenu-add-option"),hiddenInput=document.getElementById("editselectmenuoptions");return!!(container&&addButton&&hiddenInput)&&(initSelectMenu(container,addButton,hiddenInput),!0)};if(initWhenReady())return;const observer=new MutationObserver(((mutations,obs)=>{initWhenReady()&&obs.disconnect()}));observer.observe(document.body,{childList:!0,subtree:!0}),setTimeout((()=>observer.disconnect()),5e3)};const initSelectMenu=(container,addButton,hiddenInput)=>{if(!container||!addButton||!hiddenInput)return;addButton.addEventListener("click",(async()=>{if(anyEmptyInputs())return;const optionRow=document.createElement("div");optionRow.className="input-group mb-2 selectmenu-option-row";const placeholder=await(0,_str.get_string)("enteroption","mod_trainingevaluation");optionRow.innerHTML='\n            <input type="text" class="form-control selectmenu-option-input"\n                   value="" placeholder="'.concat(placeholder,'" />\n            <div class="input-group-append">\n                <button type="button" class="btn btn-danger selectmenu-remove-option">\n                    <i class="fa fa-trash"></i>\n                </button>\n            </div>\n        '),container.appendChild(optionRow),optionRow.querySelector(".selectmenu-option-input").focus(),optionRow.querySelector(".selectmenu-remove-option").addEventListener("click",(()=>removeOption(optionRow))),updateHiddenInput()}));const removeOption=row=>{container.querySelectorAll(".selectmenu-option-row").length>1?(row.remove(),updateHiddenInput()):(row.querySelector(".selectmenu-option-input").value="",updateHiddenInput())},anyEmptyInputs=()=>{const inputs=container.querySelectorAll(".selectmenu-option-input");return Array.from(inputs).some((input=>""===input.value.trim()))},updateHiddenInput=()=>{const inputs=container.querySelectorAll(".selectmenu-option-input"),options=[];inputs.forEach(((input,i)=>{const value=input.value.trim();""!==value&&options.push({id:i,value:value})})),hiddenInput.value=JSON.stringify(options)};container.querySelectorAll(".selectmenu-remove-option").forEach((button=>{button.addEventListener("click",(e=>{const row=e.target.closest(".selectmenu-option-row");removeOption(row)}))})),container.addEventListener("input",(e=>{e.target.classList.contains("selectmenu-option-input")&&updateHiddenInput()})),updateHiddenInput()}}));

//# sourceMappingURL=item_config_selectmenu.min.js.map